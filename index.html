<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lesson Store</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
</head>
<body>
<div id="lessonStore" class="container">


  <!-- Header -->
  <header class="top-bar">
    <div class="logo-title">
      <img src="image\logo.png" alt="Logo" class="logo">
      <h1>TheUKAcademy</h1>
    </div>
    <button class="cart-btn" v-on:click="toggleCart" v-bind:disabled="cart.length === 0">
      <span class="fa-solid fa-cart-shopping"></span> Cart ({{ cart.length }})
    </button>
  </header>

  <!-- Sorting -->
  <div v-if="showLessons" class="sort-section">
    <label>Sort by:</label>
    <select v-model="sortBy">
      <option value="subject">Subject</option>
      <option value="location">Location</option>
      <option value="price">Price</option>
      <option value="spaces">Spaces</option>
    </select>
    <button class="sort-btn" v-on:click="toggleSortOrder">
      {{ sortOrder === 'asc' ? 'Ascending' : 'Descending' }} <i v-bind:class="sortOrderIcon"></i>
    </button>
  </div>

  <!-- Lessons List -->
  <div v-if="showLessons" class="lessons-grid">
    <div class="lesson-card" v-for="lesson in sortedLessons" v-bind:key="lesson.id">
      <i :class="lesson.icon + ' lesson-icon'"></i>
      <h3>{{ lesson.subject }}</h3>
      <p><i class="fa-solid fa-location-dot"></i> {{ lesson.location }}</p>
      <p><i class="fa-solid fa-money-bill-1-wave"></i> Price: £{{ lesson.price }}</p>
      <p><i class="fa-solid fa-users"></i> Spaces: {{ lesson.spaces }}</p>
      <button class="add-cart-btn" v-bind:disabled="lesson.spaces === 0" v-on:click="addToCart(lesson)">
        <span class="fa-solid fa-cart-plus"></span> Add to Cart
      </button>
    </div>
  </div>

  <!-- Cart Page -->
  <div v-else class="cart-page">
    <h2><i class="fa-solid fa-cart-shopping"></i> Your Cart</h2>
    
    <div v-if="!orderPlaced">
      <div v-if="cart.length > 0" class="cart-list">
        <div class="cart-item" v-for="(item, index) in cart" v-bind:key="index">
          <p><strong>{{ item.subject }}</strong> — {{ item.location }} (£{{ item.price }})</p>
          <button class="remove-btn" v-on:click="removeFromCart(index)">
            <i class="fa-solid fa-trash"></i> Remove
          </button>
        </div>
      </div>
    </div>

    <!-- Checkout Section -->
    <div class="checkout-section">
    <h3>Checkout Information</h3>
    <form @submit.prevent="submitOrder">
        <div class="form-group">
        <label><i class="fa-solid fa-user"></i> Name</label>
        <input type="text" v-model="customer.name" placeholder="Enter your name" required>
        </div>
        <div class="form-group">
        <label><i class="fa-solid fa-phone"></i> Phone (+44)</label>
        <input type="number" v-model="customer.phone" placeholder="Enter your phone number" required>
        </div>
        <div class="form-group">
            <label><i class="fa-solid fa-earth-europe"></i> Select Country:</label>
            <div class="radio-group">
            <label>
                <input type="radio" value="England" v-model="customer.country">
                England
            </label>
            <label>
                <input type="radio" value="Wales" v-model="customer.country">
                Wales
            </label>
            <label>
                <input type="radio" value="Scotland" v-model="customer.country">
                Scotland
            </label>
            <label>
                <input type="radio" value="Northern Ireland" v-model="customer.country">
                Northern Ireland
            </label>
            </div>
        </div>
        <div class="form-group">
        <label><i class="fa-solid fa-house"></i> Address</label>
        <input type="text" v-model="customer.address" placeholder="Enter your address" required>
        </div>
        <div class="form-group">
        <label><i class="fa-solid fa-city"></i> City</label>
        <input type="text" v-model="customer.city" placeholder="Enter your city" required>
        </div>
        <div class="form-group">
        <label><i class="fa-solid fa-envelope"></i> ZIP Code</label>
        <input type="number" v-model="customer.zip" placeholder="Enter your ZIP Code" required>
        </div>
        <button type="submit" class="checkout-btn" v-bind:disabled="!validName || !validPhone">
            <i class="fa-solid fa-credit-card"></i> Confirm Checkout
        </button>

    </form>
    </div>

</div>

<script>
let app = new Vue({
  el: '#lessonStore',
  data: {
    showLessons: true,
    lessons: [
      { id: 1, subject: 'Math', location: 'London', price: 100, spaces: 5, icon: 'fa-solid fa-calculator' },
      { id: 2, subject: 'Physics', location: 'Manchester', price: 120, spaces: 5, icon: 'fa-solid fa-atom' },
      { id: 3, subject: 'English', location: 'London', price: 90, spaces: 5, icon: 'fa-solid fa-book' },
      { id: 4, subject: 'Biology', location: 'Oxford', price: 110, spaces: 5, icon: 'fa-solid fa-dna' },
      { id: 5, subject: 'Chemistry', location: 'Cambridge', price: 115, spaces: 5, icon: 'fa-solid fa-flask' },
      { id: 6, subject: 'History', location: 'Liverpool', price: 95, spaces: 5, icon: 'fa-solid fa-landmark' },
      { id: 7, subject: 'Geography', location: 'Bristol', price: 100, spaces: 5, icon: 'fa-solid fa-globe' },
      { id: 8, subject: 'Art', location: 'London', price: 130, spaces: 5, icon: 'fa-solid fa-paint-brush' },
      { id: 9, subject: 'Music', location: 'Manchester', price: 120, spaces: 5, icon: 'fa-solid fa-music' },
      { id: 10, subject: 'Computer Science', location: 'Oxford', price: 150, spaces: 5, icon: 'fa-solid fa-laptop-code' }
    ],
    cart: [],
    customer: { name: '', phone: '', country: '', address: '', city: '', zip:'' },
    orderPlaced: false,
    sortBy: 'subject',
    sortOrder: 'asc'
  },
  computed: {
    sortedLessons() {
      return this.lessons.slice().sort((a, b) => {
        let modifier = this.sortOrder === 'asc' ? 1 : -1;
        if (a[this.sortBy] < b[this.sortBy]) return -1 * modifier;
        if (a[this.sortBy] > b[this.sortBy]) return 1 * modifier;
        return 0;
      });
    }
  },

  methods: {
    addToCart(lesson) {
      if (lesson.spaces > 0) {
        this.cart.push({ ...lesson });
        lesson.spaces--;
      }
    },
    toggleCart() {

        if (this.showLessons) {
            this.showLessons = false;
            this.showCart = true;
        } else {
            this.showLessons = true;
            this.showCart = false;
            this.showCheckout = false;
        }
    }
  }
});
</script>
</body>